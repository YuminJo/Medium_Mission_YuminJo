<html layout:decorate="~{global/layout}">
<div layout:fragment="content" class="flex items-center justify-center min-h-screen bg-white-100">
    <div class="text-center mx-auto w-full max-w-md">
        <h1 class="mb-3 text-center" style="font-size: 25px;">회원가입</h1>
        <p class="mb-10">당신을 위한 회원가입! 그저 아무말이나 쓰고싶었습니다.!<br>그렇습니다! 그저 회원가입 사이트입니다!</p>
        <br>
        <!--회원가입 폼-->
        <form method="POST" class="relative mx-4" th:action="@{/member/join}" th:object="${memberCreateForm}">
            <!-- 아이디 입력란 -->
            <div class="form-control mb-4 relative">
                <label class="label block mb-2 text-left text-gray-600">아이디</label>
                <div class="relative">
                    <input type="text" id="username" name="username" placeholder="userid"
                           class="w-full px-4 py-3 border rounded-md border-gray-200" style="font-size: 15px;"
                           th:field="*{username}">
                </div>
                <span id="usernameError" class="block text-left error-message" style="font-size: 13px; color: red"
                      th:if="${#fields.hasErrors('username')}" th:errors="*{username}"></span>
            </div>

            <!-- 비밀번호 입력란 -->
            <div class="form-control mb-4 relative">
                <label class="label block mb-2 text-left text-gray-600">비밀번호</label>
                <div class="relative">
                    <input type="password" id="password1" name="password" placeholder="******"
                           class="w-full px-4 py-3 border rounded-md border-gray-200" style="font-size: 15px;"
                           th:field="*{password1}">
                    <div class="absolute inset-y-0 right-0 flex items-center pr-3 cursor-pointer"
                         onclick="togglePassword('password1', 'togglePasswordIcon')">
                        <i id="togglePasswordIcon" class="fa-solid fa-eye text-gray-400 text-lg"></i>
                    </div>
                </div>
                <span id="passwordError" class="block text-left error-message" style="font-size: 13px; color: red"
                      th:if="${#fields.hasErrors('password1')}" th:errors="*{password1}"></span>
            </div>

            <!-- 비밀번호 확인 입력란 -->
            <div class="form-control mb-10 relative">
                <label class="label block mb-2 text-left text-gray-600">비밀번호 확인</label>
                <div class="relative">
                    <input type="password" id="password2" name="passwordConfirm" placeholder="******"
                           class="w-full px-4 py-3 border rounded-md border-gray-200" style="font-size: 15px;"
                           th:field="*{password2}">
                    <div class="absolute inset-y-0 right-0 flex items-center pr-3 cursor-pointer"
                         onclick="togglePassword('password2', 'togglePasswordConfirmIcon')">
                        <i id="togglePasswordConfirmIcon" class="fa-solid fa-eye text-gray-400 text-lg"></i>
                    </div>
                </div>
                <span id="passwordConfirmError" class="block text-left error-message"
                      style="font-size: 13px; color: red"
                      th:if="${#fields.hasErrors('password2')}" th:errors="*{password2}"></span>
            </div>

            <!-- 회원가입 버튼 -->
            <div>
                <button type="submit"
                        class="bg-green-500 text-white w-full px-4 py-3 border rounded font-bold cursor-pointer">회원가입
                </button>
            </div>
        </form>

        <script>
            function togglePassword(inputId, iconId) {
                const passwordInput = document.getElementById(inputId);
                const toggleIcon = document.getElementById(iconId);

                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.classList.remove("fa-eye");
                    toggleIcon.classList.add("fa-eye-slash");
                } else {
                    passwordInput.type = "password";
                    toggleIcon.classList.remove("fa-eye-slash");
                    toggleIcon.classList.add("fa-eye");
                }
            }
        </script>
    </div>
</div>
</html>
